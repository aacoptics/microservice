<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.aacoptics.wlg.equipment.mapper.RepairOrderMapper">

    <select id="findRepairOrderList" resultType="com.aacoptics.wlg.equipment.entity.vo.RepairOrderVO">
            SELECT A.ID,
                   A.ORDER_NUMBER,
                   A.MCH_CODE,
                   A.FAULT_DESC,
                   A.FAULT_PHOTO,
                   A.DUTY_PERSON_ID,
                   A.STATUS,
                   A.SOURCE_TYPE,
                   A.SOURCE_ORDER_ID,
                   A.SOURCE_ORDER_ITEM_ID,
                   A.REPAIR_DESC,
                   A.REPAIR_DATETIME,
                   A.CREATED_TIME,
                   A.CREATED_BY,
                   A.UPDATED_TIME,
                   A.UPDATED_BY,
                   B.MCH_NAME,
                   B.SPEC,
                   B.TYPE_VERSION,
                   B.FACTORY_NO
            FROM EM_REPAIR_ORDER A
                     LEFT JOIN EM_EQUIPMENT B ON A.MCH_CODE = B.MCH_CODE
            WHERE 1=1
            <if test="repairOrderQueryParam.mchCode != null and repairOrderQueryParam.mchCode!=''">
                AND A.MCH_CODE = #{repairOrderQueryParam.mchCode}
            </if>
            <if test="repairOrderQueryParam.status != null and repairOrderQueryParam.status!=''">
                AND A.STATUS = #{repairOrderQueryParam.status}
            </if>
            <if test="repairOrderQueryParam.mchName != null and repairOrderQueryParam.mchName!=''">
                AND B.MCH_NAME = #{repairOrderQueryParam.mchName}
            </if>
            <if test="repairOrderQueryParam.spec != null and repairOrderQueryParam.spec!=''">
                AND B.SPEC = #{repairOrderQueryParam.spec}
            </if>
            <if test="repairOrderQueryParam.typeVersion != null and repairOrderQueryParam.typeVersion!=''">
                AND B.TYPE_VERSION = #{repairOrderQueryParam.typeVersion}
            </if>
            ORDER BY A.ORDER_NUMBER
    </select>

</mapper>
